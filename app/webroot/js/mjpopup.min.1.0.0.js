jQuery.fn.mjpopup=function(e){function i(e){var t=new RegExp("[a-zA-Z0-9éèêëàáâäóòôöíìîïçÉÈÊËÀÁÂÄÒÓÔÖÌÍÎÏÇ_-]+","g");var r=e.match(t);if(r!=null)n=r.length;return n}function s(){if(typeof t.onClick.active!="boolean")r='<li>Your onclick active is bad : "'+t.onClick.active+"\" <br />OnClick active must be boolean. <br />ex: 'active' : false</li>";if(typeof t.onClick.class!="string")r=r+'<li>Your onclick class is bad : "'+t.onClick.class+"\" <br />OnClick class must be boolean. <br />ex: 'class' : 'showPopup'</li>";if(typeof t.onClick.class=="string"){n=i(t.onClick.class);if(n!=1)r=r+'<li>onclick of your class is bad : "'+t.onClick.class+"\" <br />onclick of your class must have one word. <br />ex: 'class' : 'showPopup'</li>"}if(typeof t.cookie.active!="boolean")r=r+'<li>Your cookie active is bad : "'+t.cookie.active+"\" <br />Cookie active must be boolean. <br />ex: 'active' : false</li>";if(typeof t.cookie.name!="string")r=r+'<li>Your cookie name is bad : "'+t.cookie.name+"\" <br />Cookie name must be boolean. <br />ex: 'class' : 'mjpopup'</li>";if(typeof t.cookie.time!="number"||isFloat(t.cookie.time))r='<li>Your time cookie is bad : "'+t.cookie.time+"\" <br />Time cookie must be numeric. <br />ex: 'time' : 1</li>";if(typeof t.overlay.class!="string")r=r+'<li>Your overlay class is bad : "'+t.overlay.class+"\" <br />Overlay class must be boolean. <br />ex: 'class' : 'popup_div_view'</li>";if(typeof t.overlay.class=="string"){n=i(t.overlay.class);if(n!=1)r=r+'<li>Your overlay class is bad : "'+t.overlay.class+"\" <br />Overlay class must have one word. <br />ex: 'class' : 'popup_div_view'</li>"}if(typeof t.overlay.closeOnClick!="boolean")r=r+'<li>Your overlay closeOnClick is bad : "'+t.overlay.closeOnClick+"\" <br />Overlay closeOnClick must be boolean. <br />ex: 'closeOnClick' : false</li>";if(typeof t.popup.class!="string")r=r+'<li>Your popup class is bad : "'+t.popup.class+"\" <br />Popup class must be boolean. <br />ex: 'class' : 'popup_div_view'</li>";if(typeof t.overlay.class=="string"){n=i(t.popup.class);if(n!=1)r=r+'<li>Your popup class is bad : "'+t.popup.class+"\" <br />Popup class must have one word. <br />ex: 'class' : 'popup_div_view'</li>"}if(typeof t.popup.width!="number"||isFloat(t.popup.width))r=r+'<li>Your width popup is bad : "'+t.popup.width+"\" <br />Width popup must be numeric. <br />ex: 'width' : 800</li>";if(typeof t.popup.height!="number"||isFloat(t.popup.height))r=r+'<li>Your height popup is bad : "'+t.popup.height+"\" <br />Height popup must be numeric. <br />ex: 'height' : 400</li>";if(typeof t.popup.htmlpopup!="string")r=r+'<li>Your htmlpopup is bad : "'+t.popup.htmlpopup+"\" <br />htmlpopup must be string. <br />ex: 'htmlpopup' : <br />'<img src=\"img/mjpopup.jpg\" />'</li>";if(typeof t.close.EscClose!="boolean")r=r+'<li>Your EscClose is bad : "'+t.close.EscClose+"\" <br />EscClose must be boolean. <br />ex: 'EscClose' : false</li>";if(typeof t.close.class!="string")r=r+'<li>Your close class is bad : "'+t.close.class+"\" <br />Close class must be string. <br />ex: 'class' : 'close'</li>";if(typeof t.close.class=="string"){n=i(t.close.class);if(n!=1)r=r+'<li>Your close class is bad : "'+t.close.class+"\" <br />Close class must be string. <br />ex: 'class' : 'close'</li>"}if(typeof t.close.text!="string")r=r+'<li>Your close text is bad : "'+t.close.text+"\" <br />Close text must be string. <br />ex: 'text' : 'close' or (null)</li>";if(typeof t.effect.bgIn!="string")r=r+'<li>Your effect bgIn is bad : "'+t.effect.bgIn+"\" <br />Effect in bgIn must be string. <br />ex: 'bgIn' : 'fade' or  'show' or  'slide'</li>";if(typeof t.effect.bgIn=="string"){n=i(t.effect.bgIn);if(n!=1){r=r+'<li>Your effect bgIn is bad : "'+t.effect.bgIn+"\" <br />Your Effect bgIn must have one word. <br />ex: 'bgIn' : 'fade' or  'show' or  'slide'</li>"}else{switch(t.effect.bgIn){case"fade":break;case"slide":break;case"show":break;default:r=r+'<li>Your effect bgIn is bad : "'+t.effect.bgIn+"\" <br />Effect in bgIn must be string. <br />ex: 'bgIn' : 'fade' or  'show' or  'slide'</li>";break}}}if(typeof t.effect.bgOut!="string")r=r+'<li>Your effect bgOut is bad : "'+t.effect.bgOut+"\" <br />Effect in bgOut must be string. <br />ex: 'bgOut' : 'fade' or  'show' or  'slide'</li>";if(typeof t.effect.bgOut=="string"){n=i(t.effect.bgOut);if(n!=1){r=r+'<li>Your effect bgOut is bad : "'+t.effect.bgOut+"\" <br />Your Effect bgOut must have one word. <br />ex: 'bgOut' : 'fade' or  'show' or  'slide'</li>"}else{switch(t.effect.bgOut){case"fade":break;case"slide":break;case"show":break;default:r=r+'<li>Your effect bgOut is bad : "'+t.effect.bgOut+"\" <br />Effect in bgOut must be string. <br />ex: 'bgOut' : 'fade' or  'show' or  'slide'</li>";break}}}if(typeof t.effect.popupIn!="string")r=r+'<li>Your effect popupIn is bad : "'+t.effect.popupIn+"\" <br />Effect in popupIn must be string. <br />ex: 'popupIn' : 'fade' or  'show' or  'slide'</li>";if(typeof t.effect.popupIn=="string"){n=i(t.effect.popupIn);if(n!=1){r=r+'<li>Your effect popupIn is bad : "'+t.effect.popupIn+"\" <br />Your Effect popupIn must have one word. <br />ex: 'popupIn' : 'fade' or  'show' or  'slide'</li>"}else{switch(t.effect.popupIn){case"fade":break;case"slide":break;case"show":break;default:r=r+'<li>Your effect popupIn is bad : "'+t.effect.popupIn+"\" <br />Effect in popupIn must be string. <br />ex: 'popupIn' : 'fade' or  'show' or  'slide'</li>";break}}}if(typeof t.effect.popupOut!="string")r=r+'<li>Your effect popupOut is bad : "'+t.effect.popupOut+"\" <br />Effect in popupOut must be string. <br />ex: 'popupOut' : 'fade' or  'show' or  'slide'</li>";if(typeof t.effect.popupOut=="string"){n=i(t.effect.popupOut);if(n!=1){r=r+'<li>Your effect popupOut is bad : "'+t.effect.popupOut+"\" <br />Your Effect popupOut must have one word. <br />ex: 'popupOut' : 'fade' or  'show' or  'slide'</li>"}else{switch(t.effect.popupOut){case"fade":break;case"slide":break;case"show":break;default:r=r+'<li>Your effect popupOut is bad : "'+t.effect.popupOut+"\" <br />Effect in popupOut must be string. <br />ex: 'popupOut' : 'fade' or  'show' or  'slide'</li>";break}}}if(typeof t.effect.bgTime!="number"||isFloat(t.effect.bgTime))r=r+'<li>Your effect bgTime is bad : "'+t.effect.bgTime+"\" <br />Effect bgTime must be numeric. <br />ex: 'bgTime' : 400</li>";if(typeof t.effect.popupTime!="number"||isFloat(t.effect.popupTime))r=r+'<li>Your effect popupTime is bad : "'+t.effect.popupTime+"\" <br />Effect popupTime must be numeric. <br />ex: 'popupTime' : 1000</li>";if(r!=""){var e=jQuery('<div class="overlay-error"></div>').css({width:"100%",background:"black",height:jQuery(document).height(),position:"absolute",top:0,opacity:.7,zIndex:9999999,cursor:"pointer"}).hide();var s=jQuery('<div id="error"></div>').css({width:"250px",position:"fixed",top:"50px",left:"-270px",padding:"10px",background:"white",borderRadius:"6px",fontFamily:"georgia"}).html('<h2 style="text-align:center;">DEBUG PARAMS</h2><ul></ul>');s=e.append(s);jQuery("body").append(s)}}function u(){var e=jQuery('<div class="'+t.overlay.class+'"></div>').css(t.overlay.css).hide();if(t.overlay.closeOnClick)e.css("cursor","pointer");jQuery("body").append(e)}function a(){if(o!=t.popup.width){if(t.popup.css.borderWidth!=""&&t.popup.css.borderWidth!=0)t.popup.width=t.popup.width+t.popup.css.borderWidth*2;o=t.popup.width}var e=jQuery('<div class="'+t.popup.class+'"></div>').css({top:"50%",left:"50%",width:t.popup.width+"px",height:t.popup.height+"px",marginTop:-(t.popup.height/2)+"px",marginLeft:-(t.popup.width/2)+"px",position:"fixed",zIndex:99999}).hide();var n=jQuery('<a class="'+t.close.class+'">'+t.close.text+"</a>").css(t.close.css);var r=jQuery('<div class="'+t.popup.class+'_int">'+t.popup.htmlpopup+"</div>").css(t.popup.css);e=e.append(n).append(r);jQuery("body").append(e)}function f(){var e=jQuery("."+t.overlay.class);switch(t.effect.bgIn){case"show":e.show();break;case"slide":e.slideDown(t.effect.bgTime);break;case"fade":e.fadeIn(t.effect.bgTime);break;default:e.show();break}e=jQuery("."+t.popup.class);switch(t.effect.popupIn){case"show":e.show();break;case"slide":e.slideDown(t.effect.popupTime);break;case"fade":e.fadeIn(t.effect.popupTime);break;default:e.show();break}}function l(){switch(t.effect.bgOut){case"show":jQuery("."+t.overlay.class).hide(t.effect.popupTime,function(){h()});break;case"slide":jQuery("."+t.overlay.class).slideUp(t.effect.popupTime,function(){h()});break;case"fade":jQuery("."+t.overlay.class).fadeOut(t.effect.popupTime,function(){h()});break;default:jQuery("."+t.overlay.class).hide(t.effect.popupTime,function(){h()});break}switch(t.effect.popupOut){case"show":jQuery("."+t.popup.class).hide(t.effect.popupTime,function(){h()});break;case"slide":jQuery("."+t.popup.class).slideUp(t.effect.popupTime,function(){h()});break;case"fade":jQuery("."+t.popup.class).fadeOut(t.effect.popupTime,function(){h()});break;default:jQuery("."+t.popup.class).hide(t.effect.popupTime,function(){h()});break}}function c(){if(t.overlay.closeOnClick){var e="."+t.close.class+", ."+t.overlay.class;jQuery("."+t.overlay.class).css("cursor","pointer")}else{var e="."+t.close.class}jQuery(e).click(function(){l()});if(t.close.EscClose){jQuery(document).keyup(function(e){if(e.which==27){l()}})}}function h(){if(t.popup.class!="")jQuery("."+t.popup.class).remove();if(t.overlay.class!="")jQuery("."+t.overlay.class).remove()}function p(){if(t.cookie.active){if(!jQuery.cookie(t.cookie.name)){jQuery.cookie(t.cookie.name,"popup",{expires:t.cookie.time});d()}}else{d()}}function d(){u();a();f();c()}function v(){jQuery(".overlay-error").fadeIn();jQuery("#error ul").html(r);jQuery("#error ul li").css({fontFamily:"georgia",fontSize:"12px",fontStyle:"italice",padding:"10px 0"});jQuery("#error").animate({left:0},600)}var t=jQuery.extend(true,{debug:true,onClick:{active:false,"class":"showPopup"},cookie:{active:false,name:"mjpopup",time:1},overlay:{"class":"popup_overlay",closeOnClick:true,css:{background:"url(img/overlay.png)",backgroundRepeat:"repeat",zIndex:999,width:"100%",position:"absolute",top:0,height:jQuery(document).height()}},popup:{"class":"popup_div_view",width:940,height:538,css:{borderWidth:8,borderColor:"#D0D0D0",borderStyle:"solid",borderRadius:"6px 0px 6px 6px","float":"left",height:"500px",position:"relative",zIndex:999999},htmlpopup:'<img src="img/mjpopup.jpg" />'},close:{text:"close","class":"close",EscClose:true,css:{color:"black",display:"block","float":"right",padding:"4px 9px",backgroundColor:"#D0D0D0",fontSize:"12px",borderRadius:"2px 2px 0 0",textTransform:"uppercase",fontWeight:"bold",cursor:"pointer",zIndex:999999}},effect:{bgIn:"fade",bgTime:800,bgOut:"fade",popupIn:"slide",popupTime:1e3,popupOut:"slide"}},e);var n="";var r="";isFloat=function(e){try{return e.toString().indexOf(".")!=-1}catch(t){return false}};var o;if(t.debug)s();if(t.onClick.active){if(r!=""){jQuery("."+t.onClick.class).click(function(){v()})}else{jQuery("."+t.onClick.class).click(function(){p()})}}else{if(r!=""){v()}else{p()}}jQuery(".overlay-error").click(function(){$(this).fadeOut();jQuery("#error").animate({left:-270+"px"},600)})}